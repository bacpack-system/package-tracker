IF(NOT DEFINED CMAKE_SCRIPT_MODE_FILE)
    CMAKE_MINIMUM_REQUIRED(VERSION 3.21)
    PROJECT(MOCK_CMCONF_TEST)
ENDIF()

FIND_PACKAGE(CMLIB REQUIRED)

INCLUDE("${CMAKE_CURRENT_LIST_DIR}/../../TEST.cmake")

TEST_RUN("${CMAKE_CURRENT_LIST_DIR}/get_returns_value")

TEST_INVALID_CMAKE_RUN("${CMAKE_CURRENT_LIST_DIR}/get_fails_on_undefined"
    "Mock CMCONF_GET: TEST_CMCONF_UNDEFINED_VAR is not defined"
)

